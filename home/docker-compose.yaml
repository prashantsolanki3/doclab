version: "3"
services:
  homeassistant:
    image: ghcr.io/linuxserver/homeassistant
    container_name: homeassistant
    network_mode: host
    env_file: .env
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - TZ=${TZ}
    volumes:
      - ${VOL_CONFIG}/homeassistant/config:/config
    restart: ${RESTART_POLICY}
  grocy:
    image: lscr.io/linuxserver/grocy
    container_name: grocy
    env_file: .env
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - TZ=${TZ}
    volumes:
      - ${VOL_CONFIG}/grocy/config:/config
    restart: ${RESTART_POLICY}
    ports:
      - ${GROCY_PORT_80}:80
  mqtt:
    image: eclipse-mosquitto:latest
    container_name: "mqtt"
    restart: ${RESTART_POLICY}
    network_mode: host
    ports:
      - ${MQTT_PORT_1883}:1883
      - ${MQTT_PORT_9001}:9001
    volumes:
      - ${VOL_CONFIG}/mqtt/config:/mosquitto
